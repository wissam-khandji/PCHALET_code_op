!function(a){"use strict";function b(a,b){if(a=JSON.parse(a),b.html(""),a){var c=b.find("option[value=0]").html();c=c||Estatik.tr.select_location,b.html('<option value="">'+c+"</option>");for(var d in a)a[d].long_name&&b.append('<option value="'+a[d].id+'">'+a[d].long_name+"</option>");b.removeProp("disabled").removeAttr("disabled")}}function c(c,d){c.action="es_get_location_items",c.nonce=Estatik.settings.front_nonce,a.post(Estatik.ajaxurl,c,function(a){b(a,d);var c=d.data("value");c&&(d.val(c),d.trigger("change"))})}function d(b){b&&a(".es-search__wrapper, .ept-search, .ert-search, .ept-search__wrapper, .ert-search__wrapper").each(function(){for(var d in b){console.log(d);var e=a(this).find(".js-es-search-"+d);if(e.length){c({type:d,status:"initialize"},e);break}}})}var e=Estatik.widgets.search.initPriority;a(function(){function b(a){if(!a.closest(".contact-block__send-form-wrapper").length){var b=!1,c=a.closest(".es-recaptcha-wrapper");if(c.width()>=304)b&&(a.css("transform","").css("-webkit-transform","").css("-ms-transform","").css("-o-transform","").css("transform-origin","").css("-webkit-transform-origin","").css("-ms-transform-origin","").css("-o-transform-origin",""),c.height(78),b=!1);else{var d=1-(304-c.width())*(.05/15);a.css("transform","scale("+d+")").css("-webkit-transform","scale("+d+")").css("-ms-transform","scale("+d+")").css("-o-transform","scale("+d+")").css("transform-origin","0 0").css("-webkit-transform-origin","0 0").css("-ms-transform-origin","0 0").css("-o-transform-origin","0 0"),c.height(78*d),0==b&&(b=!0)}}}var f=a(".es-search__wrapper"),g=a(".es-request-widget-wrap form"),h=a(".es-response-block"),i=a(".es-select2-tags"),j=a(".js-es-select2-base");d(e),a(document).on("change",".js-es-location",function(){var b=a(this),d=b.data("field"),f=b.val(),g=a(this).closest("form");if(e[d]&&f)for(var h in e[d])if("string"==typeof e[d][h]){var i=g.find(".js-es-search-"+e[d][h]);i&&i.length&&c({type:e[d][h],status:"dependency",val:f},i)}}),a(".js-es-tabs").each(function(){var b=a(this).find(".js-es-tabs__links"),c=a(this).find(".js-es-tabs__content");b.on("click touch tap","a",function(){var d=a(a(this).attr("href"));return b.find("li").removeClass("active"),a(this).closest("li").addClass("active"),c.find(".js-es-tabs__tab").removeClass("active"),d.addClass("active"),a(window).trigger("resize"),!1});var d=window.location.hash;d&&c.find(d).length?b.find('a[href="'+d+'"]').trigger("click").trigger("touch"):c.find(".js-es-tabs__tab.active").length||b.find("li:first-child a").trigger("click").trigger("touch")}),i.length&&i.select2({tags:!0,dropdownCssClass:"es-select2__dropdown es-select2__dropdown--positioning"}),j.length&&j.select2({dropdownCssClass:"es-select2__dropdown es-select2__dropdown--positioning"}),f.find("select:not(.es-select2-tags)").select2({dropdownCssClass:"es-select2__dropdown es-select2__dropdown--positioning"}),setTimeout(function(){f.find("select.select2-hidden-accessible").trigger("change")},200),g.on("submit",function(){var b=a(this).serialize(),c=a(this);return a.post(Estatik.ajaxurl,b,function(a){a=JSON.parse(a),h.html(a),c.hide()}),!1}),a(document).on("click",".js-es-request-form-show",function(){g.show(),h.html(""),g.find("input[type=text], input[type=tel], input[type=email], textarea").val(""),"undefined"!=typeof grecaptcha&&"v2"===Estatik.settings.recaptcha_version&&grecaptcha.reset()}),f.find("input[type=reset]").on("click",function(){var b=a(this).closest("form");b.find(".es-search__field").find("input, select").val(null).attr("value","").attr("data-value","").trigger("change");var c=b.find(".select2-hidden-accessible");c.length&&(c.select2("val",""),c.select2("data",null),c.find("option").removeProp("selected").removeAttr("selected"))}),a(".js-trigger-upload").on("click",function(){return a(a(this).data("selector")).trigger("click"),!1}),a(".js-es-input-image").on("change",function(){var b=this,c=new FileReader;c.onload=function(c){a(b).closest("div").find(".js-es-image").html("<img src='"+c.target.result+"'>")},c.readAsDataURL(b.files[0]),a(".js-trigger-upload span").html(Estatik.tr.replace_photo)}),a(".js-autocomplete-wrap input").on("keyup",function(){var b=a(this),c=a(this).data("action");a.post(Estatik.ajaxurl,{action:c,nonce:Estatik.settings.front_nonce,s:a(this).val()},function(a){b.closest(".js-autocomplete-wrap").find(".es-autocomplete-result").html(a)})}),a(".js-autocomplete-wrap").on("click","li",function(b){var c=a(this),d=c.closest(".js-autocomplete-wrap");d.find("input").val(c.data("content")),d.find(".es-autocomplete-result").html(""),b.stopPropagation()}),a("body").on("click",function(){a(".es-autocomplete-result").html("")}),b(a(".es-recaptcha-wrapper .g-recaptcha")),a(window).on("resize",function(){b(a(".es-recaptcha-wrapper .g-recaptcha"))}),a(document).on("click",".js-es-wishlist-button",function(){var b=a(this);if(b.removeClass("error"),!b.hasClass("preload")){var c=b.data();c.action="es_wishlist_"+c.method,c.nonce=Estatik.settings.wishlist_nonce,b.addClass("preload");var d=b.closest("#es-saved-homes"),e=b.closest(".properties");a.post(Estatik.ajaxurl,c,function(c){c=c||{},"success"===c.status?(a(b).replaceWith(c.data),d.length&&e.fadeOut(400,function(){e.remove()})):(b.addClass("error"),c.message&&alert(c.message))},"json").always(function(){b.removeClass("preload")}).fail(function(){b.addClass("error")})}return!1}),a(".js-es-save-search").on("click",function(){var b=a(this),c=b.closest("form");b.val();b.val(Estatik.tr.saving);var d=new FormData(c[0]);d.append("action","es_save_search"),d.append("nonce",Estatik.settings.save_search_nonce),b.hasClass("es-button-green-corner")||b.addClass("es-button-green-corner"),c.find(".js-es-search__messages").html(""),a.ajax({url:Estatik.ajaxurl,type:"POST",data:d,dataType:"json",processData:!1,contentType:!1,success:function(a){a=a||{},"success"===a.status?b.val(Estatik.tr.saved):"error"===a.status&&(b.val(Estatik.tr.error),b.removeClass("es-button-green-corner").addClass("es-button-error")),a.message&&c.find(".js-es-search__messages").html(a.message)}}).always(function(){}).fail(function(){b.val(Estatik.tr.error),b.removeClass("es-button-green-corner").addClass("es-button-error")})}),a(".js-es-change-update-method").on("change",function(){var b=a(this),c=b.closest("form").find(".es-msg-container");c.html("");var d={action:"es_change_update_method",nonce:Estatik.settings.save_search_change_method_nonce,id:a(this).data("id"),update_method:a(this).val()};a.post(Estatik.ajaxurl,d,function(a){a=a||{},a.message&&("success"===a.status?a.message='<p class="es-message es-message-success"><i class="fa fa-check-circle-o" aria-hidden="true"></i> '+a.message+"</p>":a.message='<p class="es-message es-message-error"><i class="fa fa-times-circle-o" aria-hidden="true"></i> '+a.message+"</p>",c.html(a.message))},"json").fail(function(){alert(Estatik.tr.system_error)})}),a(".js-es-login-form").on("click",function(){return a.get(Estatik.ajaxurl,{action:"es_login_form",nonce:Estatik.settings.front_nonce},function(b){a.magnificPopup.open({items:{src:b,type:"inline"}})}).fail(function(){alert(Estatik.tr.system_error)}),!1});var k=a(".es-profile__wrapper--horizontal"),l=a(".es-profile__wrapper--horizontal .es-profile__tabs-wrapper");a(window).on("resize",function(){var b=0;l.find("li").each(function(){b+=a(this).outerWidth()}),l.find("ul").hasClass("slick-initialized")&&l.find("ul").slick("unslick"),k.width()<b&&l.find("ul").slick({variableWidth:!0,prevArrow:'<i class="fa fa-angle-left" aria-hidden="true"></i>',nextArrow:'<i class="fa fa-angle-right" aria-hidden="true"></i>'})}),a(window).length&&a(window).trigger("resize"),a(".js-switch-block").on("click",function(){var b=a(a(this).data("block"));return b.hasClass("hidden")?b.removeClass("hidden"):b.addClass("hidden"),!1}),a(".js-saved-search-save").on("click",function(){var b=a(this).closest(".es-saved-search__item"),c=b.find(".es-msg-container");return a.post(Estatik.ajaxurl,a(this).closest("form").serialize(),function(a){a=a||{},a.message&&("success"===a.status?(a.message='<p class="es-message es-message-success"><i class="fa fa-check-circle-o" aria-hidden="true"></i> '+a.message+"</p>",b.find(".js-saved-search-title").html(a.title)):a.message='<p class="es-message es-message-error"><i class="fa fa-times-circle-o" aria-hidden="true"></i> '+a.message+"</p>",c.html(a.message))},"json").fail(function(){alert(Estatik.tr.system_error)}).always(function(){b.find(".js-switch-block").trigger("click")}),!1});var m=a(".js-es-slideshow");m.length&&m.each(function(){var b=a(this),c=b.children().length,d=b.data("args"),e=parseInt(d.slides_to_show)||1;e=e>=c&&"vertical"===d.slider_effect?c:e;var f=[];e>3&&f.push({breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,dots:!0}}),e>2&&f.push({breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2}}),f.push({breakpoint:450,settings:{slidesToShow:1,slidesToScroll:1}}),f.push({breakpoint:200,settings:{slidesToShow:1,slidesToScroll:1}});var g={adaptiveHeight:!0,margin:20,slidesToShow:e,arrows:1==d.show_arrows||!1,prevArrow:'<span class="es-slick-arrow es-slick-prev"></span>',nextArrow:'<span class="es-slick-arrow es-slick-next"></span>',responsive:f};g.arrows||(g.autoplay=!0),"vertical"===d.slider_effect&&(g.vertical=!0,g.verticalSwiping=!0,g.autoplaySpeed=5e3),b.slick(g)}),a(".es-slide__bottom").each(function(){var b=a(this);2===b.find(".es-bottom-icon").length&&b.find(".es-bottom-icon:last-child").css({"text-align":"right"})})})}(jQuery);